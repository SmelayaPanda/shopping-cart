{{#if products }}
    <div class="row mt-3">
        <div class="col-sm-6 col-md-6 offset-sm-3 offset-md-3">
            <ul class="list-group">
                <div id="charge-error" class="alert alert-danger {{#if noError}}hidden{{/if}}">
                    {{errMsg}}
                </div>
                {{# each products }}
                    <li class="list-group-item">
                        <strong>{{ this.item.title }}</strong>
                        <span class="badge badge-success">${{ this.price }}</span>
                        <!-- Example split danger button -->
                        <span class="dropdown show ml-2">
                            <a class="btn btn-primary btn-sm dropdown-toggle"
                               href="#"
                               role="button"
                               id="dropdownMenuLink"
                               data-toggle="dropdown"
                               aria-haspopup="true"
                               aria-expanded="false">
                                Action
                            </a>
                            <div class="dropdown-menu" aria-labelledby="dropdownMenuLink">
                                <a class="dropdown-item" href="#">Increase by 1</a>
                                <a class="dropdown-item" href="#">Remove all</a>
                            </div>
                        </span>
                        <span class="badge badge-success pull-right">{{ this.qty }}</span>
                    </li>
                {{/each}}
            </ul>
        </div>
    </div>
    <div class="row">
        <div class="col-sm-6 col-md-6 offset-sm-3 offset-md-3">
            <strong class="pt-2">Your Total: ${{ totalPrice }}</strong>
            <form action="/charge" method="post" class="mt-3">
                <script
                        src="https://checkout.stripe.com/checkout.js"
                        class="stripe-button"
                        data-image="http://www.clker.com/cliparts/w/0/q/Y/P/5/shopping-cart-hi.png"
                        data-key="pk_test_6nG8xWFBDtMtcqidY3ehUTFy"
                        data-name="WashMachine-Store Demo"
                        data-description="3 widgets (${{ totalPrice }})"
                        data-amount="{{ totalPrice }}00"
                        data-billing-address="true"
                >
                </script>
                <script>
                    // Hide default stripe button
                    document.getElementsByClassName("stripe-button-el")[0].style.display = 'none';
                </script>
                <button type="submit" class="btn btn-success">Buy my things</button>
            </form>
        </div>
    </div>
{{ else }}
    <div class="row">
        <div class="col-sm-6 col-md-6 offset-sm-3 offset-md-3">
            <h2>No items in cart</h2>
        </div>
    </div>
{{/if}}
